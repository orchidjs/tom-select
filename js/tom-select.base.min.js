/**
* Tom Select v1.0.0-rc.3
* Licensed under the Apache License, Version 2.0 (the "License");
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TomSelect=e()}(this,(function(){"use strict";function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)},e.off=function(t,e){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},e.trigger=function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))},t}();var i=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=o(String(t||"")))>(e=o(String(e||"")))?1:e>t?-1:0},n=function(t,e,i){if(t&&e){if(!i)return t[e];for(var n=e.split(".");n.length&&(t=t[n.shift()]););return t}},s={a:"[aá¸€á¸Ä‚ÄƒÃ‚Ã¢ÇÇÈºâ±¥È¦È§áº áº¡Ã„Ã¤Ã€Ã ÃÃ¡Ä€ÄÃƒÃ£Ã…Ã¥Ä…Ä„ÃƒÄ…Ä„]",b:"[bâ¢Î²Î’Bà¸¿ğŒá›’]",c:"[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹CÌ„cÌ„Ã‡Ã§á¸ˆá¸‰È»È¼Æ‡ÆˆÉ•á´„ï¼£ï½ƒ]",d:"[dÄÄá¸Šá¸‹á¸á¸‘á¸Œá¸á¸’á¸“á¸á¸ÄÄ‘DÌ¦dÌ¦Æ‰É–ÆŠÉ—Æ‹ÆŒáµ­á¶á¶‘È¡á´…ï¼¤ï½„Ã°]",e:"[eÃ‰Ã©ÃˆÃ¨ÃŠÃªá¸˜á¸™ÄšÄ›Ä”Ä•áº¼áº½á¸šá¸›áººáº»Ä–Ä—Ã‹Ã«Ä’Ä“È¨È©Ä˜Ä™á¶’É†É‡È„È…áº¾áº¿á»€á»á»„á»…á»‚á»ƒá¸œá¸á¸–á¸—á¸”á¸•È†È‡áº¸áº¹á»†á»‡â±¸á´‡ï¼¥ï½…É˜ÇÆÆÎµ]",f:"[fÆ‘Æ’á¸á¸Ÿ]",g:"[gÉ¢â‚²Ç¤Ç¥ÄœÄÄÄŸÄ¢Ä£Æ“É Ä Ä¡]",h:"[hÄ¤Ä¥Ä¦Ä§á¸¨á¸©áº–áº–á¸¤á¸¥á¸¢á¸£É¦Ê°Ç¶Æ•]",i:"[iÃÃ­ÃŒÃ¬Ä¬Ä­ÃÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©Ä®Ä¯ÄªÄ«á»ˆá»‰ÈˆÈ‰ÈŠÈ‹á»Šá»‹á¸¬á¸­Æ—É¨É¨Ì†áµ»á¶–Ä°iIÄ±Éªï¼©ï½‰]",j:"[jÈ·Ä´ÄµÉˆÉ‰ÊÉŸÊ²]",k:"[kÆ˜Æ™ê€êá¸°á¸±Ç¨Ç©á¸²á¸³á¸´á¸µÎºÏ°â‚­]",l:"[lÅÅ‚Ä½Ä¾Ä»Ä¼Ä¹Äºá¸¶á¸·á¸¸á¸¹á¸¼á¸½á¸ºá¸»Ä¿Å€È½Æšâ± â±¡â±¢É«É¬á¶…É­È´ÊŸï¼¬ï½Œ]",n:"[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²È Æáµ°á¶‡É³ÈµÉ´ï¼®ï½ÅŠÅ‹]",o:"[oÃ˜Ã¸Ã–Ã¶Ã“Ã³Ã’Ã²Ã”Ã´Ç‘Ç’ÅÅ‘ÅÅÈ®È¯á»Œá»ÆŸÉµÆ Æ¡á»á»ÅŒÅÃ•ÃµÇªÇ«ÈŒÈÕ•Ö…]",p:"[pá¹”á¹•á¹–á¹—â±£áµ½Æ¤Æ¥áµ±]",q:"[qê–ê—Ê ÉŠÉ‹ê˜ê™qÌƒ]",r:"[rÅ”Å•ÉŒÉÅ˜Å™Å–Å—á¹˜á¹™ÈÈ‘È’È“á¹šá¹›â±¤É½]",s:"[sÅšÅ›á¹ á¹¡á¹¢á¹£ê¨ê©ÅœÅÅ Å¡ÅÅŸÈ˜È™SÌˆsÌˆ]",t:"[tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­Æ®ÊˆÈšÈ›á¹°á¹±á¹®á¹¯Æ¬Æ­]",u:"[uÅ¬Å­É„Ê‰á»¤á»¥ÃœÃ¼ÃšÃºÃ™Ã¹Ã›Ã»Ç“Ç”Å°Å±Å¬Å­Æ¯Æ°á»¦á»§ÅªÅ«Å¨Å©Å²Å³È”È•âˆª]",v:"[vá¹¼á¹½á¹¾á¹¿Æ²Ê‹êêŸâ±±Ê‹]",w:"[wáº‚áºƒáº€áºÅ´Åµáº„áº…áº†áº‡áºˆáº‰]",x:"[xáºŒáºáºŠáº‹Ï‡]",y:"[yÃÃ½á»²á»³Å¶Å·Å¸Ã¿á»¸á»¹áºáºá»´á»µÉÉÆ³Æ´]",z:"[zÅ¹Åºáºáº‘Å½Å¾Å»Å¼áº’áº“áº”áº•ÆµÆ¶]"},o=function(){var t,e,i,n,o="",r={};for(i in s)if(s.hasOwnProperty(i))for(o+=n=s[i].substring(2,s[i].length-1),t=0,e=n.length;t<e;t++)r[n.charAt(t)]=i;var l=new RegExp("["+o+"]","g");return function(t){return t.replace(l,(function(t){return r[t]})).toLowerCase()}}(),r=function(){function t(t,e){this.items=t,this.settings=e||{diacritics:!0}}var e=t.prototype;return e.tokenize=function(t,e){if(!(t=String(t||"").toLowerCase().trim())||!t.length)return[];var i,n,o,r,l=[],a=t.split(/ +/);for(i=0,n=a.length;i<n;i++){if(o=(a[i]+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),this.settings.diacritics)for(r in s)s.hasOwnProperty(r)&&(o=o.replace(new RegExp(r,"g"),s[r]));e&&(o="\\b"+o),l.push({string:a[i],regex:new RegExp(o,"i")})}return l},e.iterator=function(t,e){var i;i=Array.isArray(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},i.apply(t,[e])},e.getScoreFunction=function(t,e){var i,s,o,r;void 0===e&&(e=null),t=this.prepareSearch(t,e),s=t.tokens,i=t.options.fields,o=s.length,r=t.options.nesting;var l,a=function(t,e){var i,n;return t?-1===(n=(t=String(t||"")).search(e.regex))?0:(i=e.string.length/t.length,0===n&&(i+=.5),i):0},u=(l=i.length)?1===l?function(t,e){return a(n(e,i[0],r),t)}:function(t,e){for(var s=0,o=0;s<l;s++)o+=a(n(e,i[s],r),t);return o/l}:function(){return 0};return o?1===o?function(t){return u(s[0],t)}:"and"===t.options.conjunction?function(t){for(var e,i=0,n=0;i<o;i++){if((e=u(s[i],t))<=0)return 0;n+=e}return n/o}:function(t){for(var e=0,i=0;e<o;e++)i+=u(s[e],t);return i/o}:function(){return 0}},e.getSortFunction=function(t,e){var s,o,r,l,a,u,c,p,d,h,g;if(g=!(t=(r=this).prepareSearch(t,e)).query&&e.sort_empty||e.sort,d=function(t,i){return"$score"===t?i.score:n(r.items[i.id],t,e.nesting)},a=[],g)for(s=0,o=g.length;s<o;s++)(t.query||"$score"!==g[s].field)&&a.push(g[s]);if(t.query){for(h=!0,s=0,o=a.length;s<o;s++)if("$score"===a[s].field){h=!1;break}h&&a.unshift({field:"$score",direction:"desc"})}else for(s=0,o=a.length;s<o;s++)if("$score"===a[s].field){a.splice(s,1);break}for(p=[],s=0,o=a.length;s<o;s++)p.push("desc"===a[s].direction?-1:1);return(u=a.length)?1===u?(l=a[0].field,c=p[0],function(t,e){return c*i(d(l,t),d(l,e))}):function(t,e){var n,s,o;for(n=0;n<u;n++)if(o=a[n].field,s=p[n]*i(d(o,t),d(o,e)))return s;return 0}:null},e.prepareSearch=function(t,e){if("object"==typeof t)return t;var i=(e=Object.assign({},e)).fields,n=e.sort,s=e.sort_empty;return i&&!Array.isArray(i)&&(e.fields=[i]),n&&!Array.isArray(n)&&(e.sort=[n]),s&&!Array.isArray(s)&&(e.sort_empty=[s]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t,e.respect_word_boundaries),total:0,items:[]}},e.search=function(t,e){var i,n,s,o,r=this;return n=this.prepareSearch(t,e),e=n.options,t=n.query,o=e.score||r.getScoreFunction(n),t.length?r.iterator(r.items,(function(t,s){i=o(t),(!1===e.filter||i>0)&&n.items.push({score:i,id:s})})):r.iterator(r.items,(function(t,e){n.items.push({score:1,id:e})})),(s=r.getSortFunction(n,e))&&n.items.sort(s),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n},t}();function l(t,e){if("string"!=typeof e||e.length){var i="string"==typeof e?new RegExp(e,"i"):e;!function t(e){var n=0;if(3===e.nodeType){var s=e.data.search(i);if(s>=0&&e.data.length>0){var o=e.data.match(i),r=document.createElement("span");r.className="highlight";var l=e.splitText(s),a=(l.splitText(o[0].length),l.cloneNode(!0));r.appendChild(a),l.parentNode.replaceChild(r,l),n=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var u=0;u<e.childNodes.length;++u)u+=t(e.childNodes[u]);return n}(t)}}var a,u={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-control",inputClass:"ts-input",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:null,copyClassesToDropdown:!0,render:{}};function c(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""}function p(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function d(t,e,i){var n,s=t.trigger,o={};for(n in t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return s.apply(t,arguments);o[i]=arguments},i.apply(t,[]),t.trigger=s,o)o.hasOwnProperty(n)&&s.apply(t,o[n])}function h(t){if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(t.indexOf("<")>-1){var e=document.createElement("div");return e.innerHTML=t.trim(),e.querySelector(":first-child")}return document.querySelector(t)}function g(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)}function f(t,e){Object.keys(e).forEach((function(i){t.style[i]=e[i]}))}function v(t){var e=y.apply(null,arguments);(t=O(t)).map((function(t){e.map((function(e){t.classList.add(e)}))}))}function m(t){var e=y.apply(null,arguments);(t=O(t)).map((function(t){e.map((function(e){t.classList.remove(e)}))}))}function y(){for(var t=[],e=1;e<arguments.length;e++){var i=arguments[e];"string"==typeof i&&(i=i.trim().split(/[\11\12\14\15\40]/)),Array.isArray(i)&&(t=t.concat(i))}return t.filter(Boolean)}function O(t){return Array.isArray(t)||(t=[t]),t}function w(t,e,i){if(!i||i.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}}function b(t,e){return e>0?t[t.length-1]:t[0]}function C(t,e){if(!t)return-1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i}return function(e){function i(t,i){var n,s,o=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n=e.call(this)||this);if((t=h(t)).tomselect)throw new Error("Tom Select already initialized on this element");return t.tomselect=o,n.control_input=null,n.wrapper=null,n.dropdown=null,n._destroy=null,n.control=null,n.sifter=null,n.dropdown_content=null,s=(window.getComputedStyle&&window.getComputedStyle(t,null)).getPropertyValue("direction"),n.order=0,n.settings=function(t,e){var i=Object.assign({},u,e),n=i.dataAttr,s=i.labelField,o=i.valueField,r=i.disabledField,l=i.optgroupField,a=i.optgroupLabelField,p=i.optgroupValueField,d=t.tagName.toLowerCase(),h=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!h&&!i.allowEmptyOption){var g=t.querySelector('option[value=""]');g&&(h=g.textContent)}var f={placeholder:h,options:[],optgroups:[],items:[]};return"select"===d?function(){var e,u,d,h,g=f.options,v={},m=function(t){var e=Object.assign({},t.dataset),i=n&&e[n];return"string"==typeof i&&i.length&&(e=Object.assign(e,JSON.parse(i))),e},y=function(t,e){var n=c(t.value);if(n||i.allowEmptyOption)if(v.hasOwnProperty(n)){if(e){var a=v[n][l];a?Array.isArray(a)?a.push(e):v[n][l]=[a,e]:v[n][l]=e}}else{var u=m(t);u[s]=u[s]||t.textContent,u[o]=u[o]||n,u[r]=u[r]||t.disabled,u[l]=u[l]||e,v[n]=u,g.push(u),t.selected&&f.items.push(n)}},O=function(t){var e,i,n,s,o;for((n=t.getAttribute("label"))&&((s=m(t))[a]=n,s[p]=n,s[r]=t.disabled,f.optgroups.push(s)),e=0,i=(o=t.children).length;e<i;e++)y(o[e],n)};for(f.maxItems=t.hasAttribute("multiple")?null:1,e=0,u=(h=t.children).length;e<u;e++)"optgroup"===(d=h[e].tagName.toLowerCase())?O(h[e]):"option"===d&&y(h[e])}():function(){var e,r,l,a,u=t.getAttribute(n);if(u)for(f.options=JSON.parse(u),e=0,r=f.options.length;e<r;e++)f.items.push(f.options[e][o]);else{var c=t.value.trim()||"";if(!i.allowEmptyOption&&!c.length)return;for(e=0,r=(l=c.split(i.delimiter)).length;e<r;e++)(a={})[s]=l[e],a[o]=l[e],f.options.push(a);f.items=l}}(),Object.assign({},u,f,e)}(t,i),n.input=t,n.tabIndex=t.getAttribute("tabindex")||"",n.is_select_tag="select"===t.tagName.toLowerCase(),n.rtl=/rtl/i.test(s),n.highlightedValue=null,n.isBlurring=!1,n.isOpen=!1,n.isDisabled=!1,n.isRequired=t.required,n.isInvalid=!1,n.isLocked=!1,n.isFocused=!1,n.isInputHidden=!1,n.isSetup=!1,n.ignoreFocus=!1,n.ignoreBlur=!1,n.ignoreHover=!1,n.hasOptions=!1,n.currentResults=null,n.lastValue="",n.caretPos=0,n.loading=0,n.loadedSearches={},n.activeOption=null,n.activeItems=[],n.optgroups={},n.options={},n.userOptions={},n.items=[],n.renderCache={item:{},option:{}},o.settings.load&&o.settings.loadThrottle&&(o.settings.load=o.loadDebounce(o.settings.load,o.settings.loadThrottle)),o.sifter=new r(n.options,{diacritics:o.settings.diacritics}),o.setupOptions(o.settings.options,o.settings.optgroups),delete o.settings.optgroups,delete o.settings.options,o.settings.mode=o.settings.mode||(1===o.settings.maxItems?"single":"multi"),"boolean"!=typeof o.settings.hideSelected&&(o.settings.hideSelected="multi"===o.settings.mode),"string"==typeof o.settings.createFilter&&(o.settings.createFilter=new RegExp(o.settings.createFilter)),o.initializePlugins(o.settings.plugins),o.setupCallbacks(),o.setupTemplates(),o.setup(),n}t(i,e);var n=i.prototype;return n.setup=function(){var t,e,i,n,s,o,r,l,a,u=this,c=u.settings,p=u.input;if(o=u.settings.mode,r=p.getAttribute("class")||"",v(t=h("<div>"),c.wrapperClass,r,o),v(e=h('<div class="items">'),c.inputClass),t.append(e),v(n=u.render("dropdown"),c.dropdownClass,o),v(s=h('<div style="scroll-behavior: smooth;">'),c.dropdownContentClass),n.append(s),h(c.dropdownParent||t).appendChild(n),c.controlInput)i=h(c.controlInput);else{i=h('<input type="text" autocomplete="off" />');for(var d=["autocorrect","autocapitalize","autocomplete"],g=0;g<d.length;g++){var f=d[g];p.getAttribute(f)&&i.setAttribute(f,p.getAttribute(f))}}if(c.controlInput||(i.setAttribute("tabindex",p.disabled?"-1":u.tabIndex),e.appendChild(i)),a=p.getAttribute("id")){i.setAttribute("id",a+"-tomselected");var m=document.querySelector("label[for='"+a+"']");m&&m.setAttribute("for",a+"-tomselected")}if(u.settings.copyClassesToDropdown&&v(n,r),t.style.width=p.style.width,u.plugins.names.length&&(l="plugin-"+u.plugins.names.join(" plugin-"),v([t,n],l)),(null===c.maxItems||c.maxItems>1)&&u.is_select_tag&&p.setAttribute("multiple","multiple"),u.settings.placeholder&&i.setAttribute("placeholder",c.placeholder),!u.settings.splitOn&&u.settings.delimiter){var y=u.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");u.settings.splitOn=new RegExp("\\s*"+y+"+\\s*")}u.control=e,u.control_input=i,u.wrapper=t,u.dropdown=n,u.dropdown_content=s,u.control_input.type=p.type,n.addEventListener("mouseenter",(function(t){var e=w(t.target,"[data-selectable]",n);if(e)return u.onOptionHover.call(u,t,e)}),!0),e.addEventListener("mousedown",(function(t){var i=w(t.target,"."+u.settings.itemClass,e);return i?u.onItemSelect.call(u,t,i):u.onMouseDown.call(u,t)})),e.addEventListener("click",(function(){u.onClick.apply(u,arguments)})),i.addEventListener("mousedown",(function(t){t.stopPropagation()})),i.addEventListener("keydown",(function(){return u.onKeyDown.apply(u,arguments)})),i.addEventListener("keyup",(function(){return u.onKeyUp.apply(u,arguments)})),i.addEventListener("keypress",(function(){return u.onKeyPress.apply(u,arguments)})),i.addEventListener("resize",(function(){u.positionDropdown.apply(u,[])})),i.addEventListener("blur",(function(){return u.onBlur.apply(u,arguments)})),i.addEventListener("focus",(function(){return u.ignoreBlur=!1,u.onFocus.apply(u,arguments)})),i.addEventListener("paste",(function(){return u.onPaste.apply(u,arguments)}));var O=function(t){var e=w(t.target,"[data-selectable]",u.dropdown);e||u.wrapper.contains(t.target)?(t.preventDefault(),t.stopPropagation(),e&&u.onOptionSelect(t,e)):u.isFocused&&u.blur(t.target)},b=function(){u.isOpen&&u.positionDropdown.apply(u,arguments)},C=function(){u.ignoreHover=!1};document.addEventListener("mousedown",O),window.addEventListener("sroll",b),window.addEventListener("resize",b),window.addEventListener("mousemove",C),u._destroy=function(){document.removeEventListener("mousedown",O),window.removeEventListener("mousemove",C),window.removeEventListener("sroll",b),window.removeEventListener("resize",b)};for(var A=[];p.children.length>0;)A.push(p.children[0]),p.children[0].remove();this.revertSettings={children:A,tabindex:p.getAttribute("tabindex")},p.setAttribute("tabindex",-1),p.setAttribute("hidden","hidden"),p.insertAdjacentElement("afterend",u.wrapper),u.setValue(c.items),delete c.items,p.addEventListener("invalid",(function(t){t.preventDefault(),u.isInvalid||(u.isInvalid=!0,u.refreshState())})),u.updateOriginalInput(),u.refreshItems(),u.refreshState(),u.isSetup=!0,p.disabled&&u.disable(),u.on("change",this.onChange),v(p,"tomselected"),u.trigger("initialize"),!0===c.preload&&u.onSearchChange("")},n.setupOptions=function(t,e){var i,n;for(e=e||[],i=0,n=(t=t||[]).length;i<n;i++)this.registerOption(t[i]);for(i=0,n=e.length;i<n;i++)this.registerOptionGroup(e[i])},n.setupTemplates=function(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,n={optgroup:function(t,e){var i=document.createElement("div");return i.className="optgroup",i.appendChild(t.options),i},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[i])+"</div>"},option:function(t,i){return"<div>"+i(t[e])+"</div>"},item:function(t,i){return"<div>"+i(t[e])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"},no_results:function(t,e){return'<div class="no-results">No results found</div>'},loading:function(t,e){return'<div class="spinner"></div>'},dropdown:function(){return'<div style="display:none"></div>'}};t.settings.render=Object.assign({},n,t.settings.render)},n.setupCallbacks=function(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)(e=this.settings[i[t]])&&this.on(t,e)},n.onClick=function(t){var e=this;e.isFocused&&e.isOpen||(e.focus(),t.preventDefault())},n.onMouseDown=function(t){var e=this;if(e.isFocused){if(t.target!==e.control_input)return"single"===e.settings.mode?e.isOpen?e.close():e.open():e.setActiveItem(),!1}else window.setTimeout((function(){e.focus()}),0)},n.onChange=function(){g(this.input,"change")},n.onPaste=function(t){var e=this;e.isFull()||e.isInputHidden||e.isLocked?t.preventDefault():e.settings.splitOn&&setTimeout((function(){var t=e.inputValue();if(t.match(e.settings.splitOn))for(var i=t.trim().split(e.settings.splitOn),n=0,s=i.length;n<s;n++)e.createItem(i[n])}),0)},n.onKeyPress=function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},n.onKeyDown=function(t){var e=this;t.target,e.control_input;if(e.ignoreHover=!0,e.isLocked)9!==t.keyCode&&t.preventDefault();else{switch(t.keyCode){case 65:if(e.isKeyDown(17,t))return void e.selectAll();break;case 27:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){var i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i,!0)}return void t.preventDefault();case 38:if(e.activeOption){var n=e.getAdjacent(e.activeOption,-1);n&&e.setActiveOption(n,!0)}return void t.preventDefault();case 13:return void(e.isOpen&&e.activeOption&&(e.onOptionSelect(t,e.activeOption),t.preventDefault()));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return e.settings.selectOnTab&&e.isOpen&&e.activeOption&&(e.onOptionSelect(t,e.activeOption),t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case 8:case 46:return void e.deleteSelection(t)}!e.isInputHidden||e.isKeyDown(17,t)||t.preventDefault()}},n.onKeyUp=function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var i=e.inputValue();e.lastValue!==i&&(e.lastValue=i,e.onSearchChange(i),e.refreshOptions(),e.trigger("type",i))},n.onSearchChange=function(t){var e=this,i=e.settings.load;i&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load((function(n){i.apply(e,[t,n])}))))},n.onFocus=function(t){void 0===t&&(t=null);var e=this,i=e.isFocused;if(e.isDisabled)return e.blur(),t&&t.preventDefault(),!1;e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),i||e.trigger("focus"),e.activeItems.length||(e.showInput(),e.setActiveItem(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())},n.onBlur=function(t,e){var i=this;if(i.isFocused){if(i.isFocused=!1,i.ignoreFocus=!1,!i.ignoreBlur&&document.activeElement===i.dropdown_content)return i.ignoreBlur=!0,void i.onFocus(t);var n=function(){i.close(),i.setActiveItem(),i.setActiveOption(),i.setCaret(i.items.length),i.refreshState(),e&&e.focus&&e.focus(),i.isBlurring=!1,i.trigger("blur")};i.isBlurring=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},n.onOptionHover=function(t,e){this.ignoreHover||this.setActiveOption(e,!1)},n.onOptionSelect=function(t,e){var i,n=this;e&&(e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?n.createItem(null,!0,(function(){n.settings.closeAfterSelect&&n.close()})):void 0!==(i=e.dataset.value)&&(n.lastQuery=null,n.addItem(i),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&n.setActiveOption(n.getOption(i)))))},n.onItemSelect=function(t,e){var i=this;i.isLocked||"multi"===i.settings.mode&&(t.preventDefault(),i.setActiveItem(e,t))},n.load=function(t){var e=this;v(e.wrapper,e.settings.loadingClass),e.loading++,t.call(e,(function(t,i){e.loading=Math.max(e.loading-1,0),e.lastQuery=null,e.setupOptions(t,i),e.refreshOptions(e.isFocused&&!e.isInputHidden),e.loading||m(e.wrapper,e.settings.loadingClass),e.trigger("load",t)}))},n.loadDebounce=function(t,e){var i;return function(){var n=this,s=arguments;i&&(n.loading=Math.max(n.loading-1,0)),window.clearTimeout(i),i=window.setTimeout((function(){i=null,t.apply(n,s)}),e)}},n.setTextboxValue=function(t){var e=this.control_input;e.value!==t&&(e.value=t,g(e,"update"),this.lastValue=t)},n.getValue=function(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)},n.setValue=function(t,e){void 0===e&&(e=!1),d(this,e?[]:["change"],(function(){this.clear(e),this.addItems(t,e)}))},n.setActiveItem=function(t,e){var i,n,s,o,r,l;if(void 0===t&&(t=null),void 0===e&&(e=null),"single"!==this.settings.mode){if(!t)return m(this.activeItems,"active"),this.activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(i=e&&e.type.toLowerCase())&&this.isKeyDown(16,e)&&this.activeItems.length){for(l=this.getLastActive(),(s=Array.prototype.indexOf.call(this.control.children,l))>(o=Array.prototype.indexOf.call(this.control.children,t))&&(r=s,s=o,o=r),n=s;n<=o;n++)t=this.control.children[n],-1===this.activeItems.indexOf(t)&&this.setActiveItemClass(t);e.preventDefault()}else"mousedown"===i&&this.isKeyDown(17,e)||"keydown"===i&&this.isKeyDown(16,e)?t.classList.contains("active")?this.removeActiveItem(t):this.setActiveItemClass(t):(m(this.activeItems,"active"),this.activeItems=[],this.setActiveItemClass(t));this.hideInput(),this.isFocused||this.focus()}},n.setActiveItemClass=function(t){var e=this.control.querySelector(".last-active");e&&m(e,"last-active"),v(t,"active last-active"),-1==this.activeItems.indexOf(t)&&this.activeItems.push(t)},n.removeActiveItem=function(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),m(t,"active")},n.setActiveOption=function(t,e){var i,n,s;if(void 0===t&&(t=null),void 0===e&&(e=!1),t!==this.activeOption&&(this.activeOption&&m(this.activeOption,"active"),this.activeOption=null,t&&(this.activeOption=t,v(t,"active"),e))){i=this.dropdown_content.clientHeight;var o=this.dropdown_content.scrollTop||0;n=this.activeOption.offsetHeight,(s=this.activeOption.getBoundingClientRect().top-this.dropdown_content.getBoundingClientRect().top+o)+n>i+o?this.dropdown_content.scrollTop=s-i+n:s<o&&(this.dropdown_content.scrollTop=s)}},n.selectAll=function(){"single"!==this.settings.mode&&(this.activeItems=this.controlChildren(),this.activeItems.length&&(v(this.activeItems,"active"),this.hideInput(),this.close()),this.focus())},n.hideInput=function(){this.settings.controlInput||(this.setTextboxValue(""),f(this.control_input,{opacity:0,position:"absolute",left:(this.rtl?1e4:-1e4)+"px"}),this.isInputHidden=!0)},n.showInput=function(){this.settings.controlInput||(f(this.control_input,{opacity:1,position:"relative",left:0}),this.isInputHidden=!1)},n.inputValue=function(){return this.control_input.value.trim()},n.focus=function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.focus(),window.setTimeout((function(){t.ignoreFocus=!1,t.onFocus()}),0))},n.blur=function(t){void 0===t&&(t=null),this.control_input.blur(),this.onBlur(null,t)},n.getScoreFunction=function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},n.getSearchOptions=function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}},n.search=function(t){var e,i,n,s=this,o=s.settings,r=this.getSearchOptions();if(o.score&&"function"!=typeof(n=s.settings.score.call(this,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(t!==s.lastQuery?(s.lastQuery=t,i=s.sifter.search(t,Object.assign(r,{score:n})),s.currentResults=i):i=Object.assign({},s.currentResults),o.hideSelected)for(e=i.items.length-1;e>=0;e--)-1!==s.items.indexOf(c(i.items[e].id))&&i.items.splice(e,1);return i},n.refreshOptions=function(t){var e,i,n,s,o,r,a,u,p,d,h,g,f;void 0===t&&(t=!0);var y,O=this,w=O.inputValue(),b=O.search(w),C=O.activeOption&&c(O.activeOption.dataset.value),A=!1;for(s=b.items.length,"number"==typeof O.settings.maxOptions&&(s=Math.min(s,O.settings.maxOptions)),s>0&&(A=!0),o={},r=[],e=0;e<s;e++){var I=O.options[b.items[e].id],_=c(I[O.settings.valueField]),S=O.getOption(_);for(S||(S=O.render("option",I)),a=I[O.settings.optgroupField]||"",i=0,n=(u=Array.isArray(a)?a:[a])&&u.length;i<n;i++)a=u[i],O.optgroups.hasOwnProperty(a)||(a=""),o.hasOwnProperty(a)||(o[a]=document.createDocumentFragment(),r.push(a)),i>0&&m(S=S.cloneNode(!0),"active"),o[a].appendChild(S)}for(this.settings.lockOptgroupOrder&&r.sort((function(t,e){return(O.optgroups[t].$order||0)-(O.optgroups[e].$order||0)})),p=document.createDocumentFragment(),e=0,s=r.length;e<s;e++)if(a=r[e],O.optgroups.hasOwnProperty(a)&&o[a].children.length){var F=document.createDocumentFragment();F.appendChild(O.render("optgroup_header",O.optgroups[a])),F.appendChild(o[a]);var x=O.render("optgroup",{group:O.optgroups[a],options:F});p.appendChild(x)}else p.appendChild(o[a]);if(O.dropdown_content.innerHTML="",O.dropdown_content.appendChild(p),O.settings.highlight&&(O.dropdown_content,y=document.querySelectorAll("span.highlight"),Array.prototype.forEach.call(y,(function(t,e){var i=t.parentNode;i.replaceChild(t.firstChild,t),i.normalize()})),b.query.length&&b.tokens.length))for(e=0,s=b.tokens.length;e<s;e++)l(O.dropdown_content,b.tokens[e].regex);if(!O.settings.hideSelected)for(e=0,s=O.items.length;e<s;e++){var L=O.getOption(O.items[e]);L&&v(L,"selected")}var D=function(t){A=!0;var e=O.render(t,{input:w});return O.dropdown_content.insertBefore(e,O.dropdown_content.firstChild),e};if(O.loading?D("loading"):0===b.items.length&&O.settings.render.no_results&&w.length&&D("no_results"),(d=O.canCreate(w))&&(f=D("option_create")),O.hasOptions=b.items.length>0||d,A){if(b.items.length>0)if((g=C&&O.getOption(C))&&O.dropdown_content.contains(g))h=g;else if("single"===O.settings.mode&&O.items.length)h=O.getOption(O.items[0]);else{var E=0;f&&!O.settings.addPrecedence&&(E=1),h=O.selectable()[E]}else h=f;O.setActiveOption(h),t&&!O.isOpen&&O.open()}else O.setActiveOption(),t&&O.isOpen&&O.close()},n.selectable=function(){return this.dropdown_content.querySelectorAll("[data-selectable]")},n.addOption=function(t){var e,i,n,s=this;if(Array.isArray(t))for(e=0,i=t.length;e<i;e++)s.addOption(t[e]);else(n=s.registerOption(t))&&(s.userOptions[n]=!0,s.lastQuery=null,s.trigger("option_add",n,t))},n.registerOption=function(t){var e=c(t[this.settings.valueField]);return null!=e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},n.registerOptionGroup=function(t){var e=c(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},n.addOptionGroup=function(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)},n.removeOptionGroup=function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))},n.clearOptionGroups=function(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")},n.updateOption=function(t,e){var i,n,s,o,r,l,a,u=this;if(t=c(t),s=c(e[u.settings.valueField]),null!==t&&u.options.hasOwnProperty(t)){if("string"!=typeof s)throw new Error("Value must be set in option data");a=u.options[t].$order,s!==t&&(delete u.options[t],-1!==(o=u.items.indexOf(t))&&u.items.splice(o,1,s)),e.$order=e.$order||a,u.options[s]=e,r=u.renderCache.item,l=u.renderCache.option,r&&(delete r[t],delete r[s]),l&&(delete l[t],delete l[s]),-1!==u.items.indexOf(s)&&(i=u.getItem(t),n=u.render("item",e),i.classList.contains("active")&&v(n,"active"),i.parentNode.insertBefore(n,i),i.remove()),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},n.removeOption=function(t,e){var i=this;t=c(t);var n=i.renderCache.item,s=i.renderCache.option;n&&delete n[t],s&&delete s[t],delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)},n.clearOptions=function(){this.loadedSearches={},this.userOptions={},this.clearCache();var t={};for(var e in this.options)this.options.hasOwnProperty(e)&&this.items.indexOf(e)>=0&&(t[e]=this.options[e]);this.options=this.sifter.items=t,this.lastQuery=null,this.trigger("option_clear")},n.getOption=function(t){return this.renderCache.option.hasOwnProperty(t)?this.renderCache.option[t]:this.getElementWithValue(t,this.selectable())},n.getAdjacent=function(t,e,i){if(void 0===i&&(i="option"),t){var n=this,s=n.settings.optionClass,o=n.dropdown;"item"==i&&(o=n.control,s=n.settings.itemClass);for(var r=o.querySelectorAll("."+s),l=0;l<r.length;l++)if(r[l]==t)return e>0?r[l+1]:r[l-1]}},n.getElementWithValue=function(t,e){if(null!=(t=c(t)))for(var i=0,n=e.length;i<n;i++)if(e[i].getAttribute("data-value")===t)return e[i]},n.getItem=function(t){return this.getElementWithValue(t,this.control.children)},n.addItems=function(t,e){void 0===e&&(e=!1),this.buffer=document.createDocumentFragment();for(var i=this.control.children,n=0;n<i.length;n++)this.buffer.appendChild(i[n]);for(var s=Array.isArray(t)?t:[t],o=0,r=s.length;o<r;o++)this.isPending=o<r-1,this.addItem(s[o],e);var l=this.control;l.insertBefore(this.buffer,l.firstChild),this.buffer=null},n.addItem=function(t,e){void 0===e&&(e=!1),d(this,e?[]:["change"],(function(){var i,n,s=this,o=s.settings.mode;if(t=c(t),(-1===s.items.indexOf(t)||("single"===o&&s.close(),"single"!==o&&s.settings.duplicates))&&s.options.hasOwnProperty(t)&&("single"===o&&s.clear(e),("multi"!==o||!s.isFull())&&(i=s.render("item",s.options[t]),this.control.contains(i)&&(i=i.cloneNode(!0)),n=s.isFull(),s.items.splice(s.caretPos,0,t),s.insertAtCaret(i),(!s.isPending||!n&&s.isFull())&&s.refreshState(),s.isSetup))){var r=s.selectable();if(!s.isPending){var l=s.getOption(t),a=s.getAdjacent(l,1);s.refreshOptions(s.isFocused&&"single"!==o),a&&s.setActiveOption(a)}!r.length||s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",t,i),s.isPending||s.updateOriginalInput({silent:e})}}))},n.removeItem=function(t,e){var i,n;void 0===e&&(e=!1);var s=this.getItem(t);s&&(t=c(s.dataset.value),-1!==(i=this.items.indexOf(t))&&(s.remove(),s.classList.contains("active")&&(n=this.activeItems.indexOf(s),this.activeItems.splice(n,1),m(s,"active")),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(t)&&this.removeOption(t,e),i<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updateOriginalInput({silent:e}),this.positionDropdown(),this.trigger("item_remove",t,s)))},n.createItem=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=!0),void 0===i&&(i=null);var n,s=this,o=s.caretPos;if(t=t||s.inputValue(),"function"!=typeof i&&(i=function(){}),!s.canCreate(t))return i(),!1;s.lock();var r=!1,l=function(t){if(s.unlock(),!t||"object"!=typeof t)return i();var n=c(t[s.settings.valueField]);if("string"!=typeof n)return i();s.setTextboxValue(""),s.addOption(t),s.setCaret(o),s.addItem(n),s.refreshOptions(e&&"single"!==s.settings.mode),i(t),r=!0};return"function"==typeof s.settings.create?n=s.settings.create.apply(this,[t,l]):((n={})[s.settings.labelField]=t,n[s.settings.valueField]=t),r||l(n),!0},n.refreshItems=function(){this.lastQuery=null,this.isSetup&&this.addItems(this.items),this.refreshState(),this.updateOriginalInput()},n.refreshState=function(){var t=this;t.refreshValidityState();var e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);var n,s=t.control.classList;s.toggle("focus",t.isFocused),s.toggle("disabled",t.isDisabled),s.toggle("required",t.isRequired),s.toggle("invalid",t.isInvalid),s.toggle("locked",i),s.toggle("full",e),s.toggle("not-full",!e),s.toggle("input-active",t.isFocused&&!t.isInputHidden),s.toggle("dropdown-active",t.isOpen),s.toggle("has-options",(n=t.options,0===Object.keys(n).length)),s.toggle("has-items",t.items.length>0)},n.refreshValidityState=function(){if(this.input.checkValidity){var t=!this.input.checkValidity();this.isInvalid=t,this.control_input.required=t,this.input.required=!t}},n.isFull=function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},n.updateOriginalInput=function(t){var e,i,n,s,o=this;if(t=t||{},o.is_select_tag){for(n=[],e=0,i=o.items.length;e<i;e++)s=o.options[o.items[e]][o.settings.labelField]||"",n.push('<option value="'+p(o.items[e])+'" selected="selected">'+p(s)+"</option>");n.length||this.input.hasAttribute("multiple")||n.push('<option value="" selected="selected"></option>'),o.input.innerHTML=n.join("")}else o.input.value=o.getValue(),o.input.setAttribute("value",o.input.value);o.isSetup&&(t.silent||o.trigger("change",o.input.value))},n.open=function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),f(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),f(t.dropdown,{visibility:"visible",display:"block"}),t.trigger("dropdown_open",t.dropdown))},n.close=function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.isBlurring||t.blur()),t.isOpen=!1,f(t.dropdown,{display:"none"}),t.setActiveOption(),t.refreshState(),e&&t.trigger("dropdown_close",t.dropdown)},n.positionDropdown=function(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,n=e.left+window.scrollX;f(this.dropdown,{width:e.width+"px",top:i+"px",left:n+"px"})}},n.clear=function(t){if(this.items.length){for(var e=this.controlChildren(),i=0;i<e.length;i++)e[i].remove();this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.trigger("clear")}},n.insertAtCaret=function(t){var e=Math.min(this.caretPos,this.items.length),i=this.buffer||this.control;0===e?i.insertBefore(t,i.firstChild):i.insertBefore(t,i.children[e]),this.setCaret(e+1)},n.deleteSelection=function(t){var e,i,n,s,o,r,l,a=this;if(n=t&&8===t.keyCode?-1:1,s={start:(l=a.control_input).selectionStart,length:l.selectionEnd-l.selectionStart},o=[],a.activeItems.length){for(r=C(b(a.activeItems,n)),n>0&&r++,e=0,i=a.activeItems.length;e<i;e++)o.push(a.activeItems[e].dataset.value);t&&(t.preventDefault(),t.stopPropagation())}else(a.isFocused||"single"===a.settings.mode)&&a.items.length&&(n<0&&0===s.start&&0===s.length?o.push(a.items[a.caretPos-1]):n>0&&s.start===a.inputValue().length&&o.push(a.items[a.caretPos]));if(!o.length||"function"==typeof a.settings.onDelete&&!1===a.settings.onDelete.apply(a,[o,t]))return!1;for(void 0!==r&&a.setCaret(r);o.length;)a.removeItem(o.pop());return a.showInput(),a.positionDropdown(),a.refreshOptions(!1),!0},n.advanceSelection=function(t,e){var i,n;if(0!==t)if(this.rtl&&(t*=-1),this.isKeyDown(17,e)||this.isKeyDown(16,e)){n=this.getLastActive(t);var s=this.getAdjacent(n,t,"item");s&&(s.classList.contains("active")&&this.removeActiveItem(n),this.setActiveItemClass(s))}else this.isFocused&&!this.isInputHidden?this.inputValue().length||this.setCaret(this.caretPos+t):(n=this.getLastActive(t))&&(i=C(n),this.setCaret(t>0?i+1:i),this.setActiveItem())},n.getLastActive=function(t){var e=this.control.querySelector(".last-active");return e||function(t,e,i){var n=t.querySelectorAll(e);if(n)return b(n,i)}(this.control,".active",t)},n.setCaret=function(t){var e=this;if(t="single"===e.settings.mode||e.settings.controlInput?e.items.length:Math.max(0,Math.min(e.items.length,t)),!e.settings.controlInput&&!e.isPending){var i,n,s=this.controlChildren(),o=s.length;for(i=0;i<o;i++)n=s[i],i<t?e.control_input.insertAdjacentElement("beforebegin",n):e.control.appendChild(n)}e.caretPos=t},n.controlChildren=function(){return Array.prototype.filter.call(this.control.children,(function(t){return"INPUT"!==t.nodeName}))},n.lock=function(){this.close(),this.isLocked=!0,this.refreshState()},n.unlock=function(){this.isLocked=!1,this.refreshState()},n.disable=function(){this.input.disabled=!0,this.control_input.disabled=!0,this.control_input.tabIndex=-1,this.isDisabled=!0,this.lock()},n.enable=function(){this.input.disabled=!1,this.control_input.disabled=!1,this.control_input.tabIndex=this.tabIndex,this.isDisabled=!1,this.unlock()},n.destroy=function(){var t=this.revertSettings;this.trigger("destroy"),this.off(),this.wrapper.remove(),this.dropdown.remove(),this.input.innerHTML="",t.tabindex?this.input.setAttribute("tabindex",t.tabindex):this.input.removeAttribute("tabindex"),m(this.input,"tomselected"),this.input.removeAttribute("hidden");for(var e=0;e<t.children.length;e++)this.input.appendChild(t.children[e]);this._destroy(),delete this.input.tomselect},n.render=function(t,e){var i,n,s;void 0===e&&(e=null);var o=this;return"option"!==t&&"item"!==t||(i=c(e[o.settings.valueField]),!o.renderCache[t].hasOwnProperty(i))?(s=h(o.settings.render[t].apply(this,[e,p])),"option"===t||"option_create"===t?e[o.settings.disabledField]||s.setAttribute("data-selectable",""):"optgroup"===t&&(n=e.group[o.settings.optgroupValueField],s.setAttribute("data-group",n),e.group[o.settings.disabledField]&&s.setAttribute("data-disabled","")),"option"!==t&&"item"!==t||(s.setAttribute("data-value",i),v(s,"item"===t?o.settings.itemClass:o.settings.optionClass),o.renderCache[t][i]=s),s):o.renderCache[t][i]},n.clearCache=function(t){void 0===t&&(t=null);null===t?this.renderCache={item:{},option:{}}:this.renderCache[t]={}},n.canCreate=function(t){if(!this.settings.create)return!1;var e=this.settings.createFilter;return t.length&&("function"!=typeof e||e.call(this,t))&&(!(e instanceof RegExp)||e.test(t))},n.isKeyDown=function(t,e){return!!e&&(!e.altKey&&((!e.ctrlKey||!e.shiftKey)&&(!(17!=t||!e.ctrlKey)||!(16!=t||!e.shiftKey))))},n.hook=function(t,e,i){var n=this,s=n[e];n[e]=function(){var e,o;return"after"===t&&(e=s.apply(n,arguments)),o=i.apply(n,arguments),"instead"===t?o:("before"===t&&(e=s.apply(n,arguments)),e)}},i}(((a=e).plugins={},function(e){function i(){return e.apply(this,arguments)||this}t(i,e),i.define=function(t,e){a.plugins[t]={name:t,fn:e}};var n=i.prototype;return n.initializePlugins=function(t){var e,i,n,s=this,o=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},Array.isArray(t))for(e=0,i=t.length;e<i;e++)"string"==typeof t[e]?o.push(t[e]):(s.plugins.settings[t[e].name]=t[e].options,o.push(t[e].name));else if(t)for(n in t)t.hasOwnProperty(n)&&(s.plugins.settings[n]=t[n],o.push(n));for(;o.length;)s.require(o.shift())},n.loadPlugin=function(t){var e=this,i=e.plugins,n=a.plugins[t];if(!a.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=n.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)},n.require=function(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]},i}(a)))}));var tomSelect=function(t,e){return new TomSelect(t,e)};
//# sourceMappingURL=tom-select.base.min.js.map
